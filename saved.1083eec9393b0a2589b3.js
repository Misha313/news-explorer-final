!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t,this.header=n,this.headerBtn=this.header.querySelector(".button"),this.savedLink=this.header.querySelector(".header-nav__link-saved"),this.btn=this.header.querySelector(".button")}var t,n,o;return t=e,(n=[{key:"_render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;e?(this.btn.textContent=t,this.savedLink.style.display="flex"):(this.savedLink.style.display="none",this.headerBtn.textContent=t)}},{key:"logoutInSave",value:function(){this.headerBtn.addEventListener("click",(function(){localStorage.removeItem("token"),window.location.reload(),console.log(localStorage.getItem("token"))}))}},{key:"redirect",value:function(){localStorage.getItem("token")||(document.location.href="./index.html")}},{key:"checkLogin",value:function(){var e=this;this.api.getUserData().then((function(t){e._render(1,t.name)})).catch((function(t){return e._render(0,"Авторизоваться"),console.log(t)}))}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainApi=t,this.keyWord=n,this.cardId=""}var t,n,o;return t=e,(n=[{key:"create",value:function(e,t,n,r,o,a,c){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"undefind",i='\n    <div class="news-card">\n    <div class="id" style="display: none;"></div>\n    <img alt="background" src="" class="news-card__image">\n    <div class="news-card__save-icon"></div>\n    <div class="news-card__delete-icon news-card__save-icon"style="display: none;"></div>\n    <div class="news-card__keyword" style="display: none;"></div>\n    <div class="news-card__content" >\n      <div class="news-card__data">2 августа, 2019</div>\n      <h2 class="news-card__title">Национальное достояние – парки</h2>\n      <p class="news-card__text">В 2016 году Америка отмечала важный юбилей: сто лет назад здесь начала\n        складываться система национальных парков – охраняемых территорий, где и сегодня каждый может приобщиться к\n        природе.</p>\n      <a class="news-card__source" href="https://lenta.ru/" target="_blank">Лента.ру</a>\n    </div>\n  </div>\n    ',l=document.createElement("div");l.insertAdjacentHTML("afterbegin",i);var u=l.firstElementChild;return u.querySelector(".news-card__image").setAttribute("src",a),u.querySelector(".news-card__data").textContent=e.substr(0,10),u.querySelector(".news-card__title").textContent=t,u.querySelector(".news-card__text").textContent=n,u.querySelector(".news-card__source").textContent=r,u.querySelector(".news-card__source").setAttribute("href",o),u.querySelector(".news-card__keyword").textContent=c,u.querySelector(".id").textContent=s,this.keyWord=c,this.card=u,this.card.addEventListener("click",this.goToNews),this.renderIcon(),this.card}},{key:"renderIcon",value:function(){var e=this;if(localStorage.getItem("token"))this.card.querySelector(".news-card__save-icon").style.background="url(./images/saveHover.svg)",this.card.querySelector(".news-card__save-icon").addEventListener("click",(function(t){return e.saveAndDeleteCard.bind(e)(t)}));else{var t=this.card.querySelector(".news-card__save-icon");t.style.background="url(./images/save.svg)",t.insertAdjacentHTML("afterend",'<div class="news-card__tooltip">Ввойдите, чтобы сохраниять статьи</div>'),t.addEventListener("mouseover",(function(t){return e.mouseoverHandlerNotLogin.bind(e)(t)})),t.addEventListener("mouseout",(function(t){return e.mouseoutHandlerNotLogin.bind(e)(t)}))}}},{key:"saveAndDeleteCard",value:function(e){var t=this,n=e.target.closest(".news-card"),r=n.querySelector(".news-card__save-icon"),o=n.querySelector(".news-card__image").getAttribute("src"),a=n.querySelector(".news-card__data").textContent,c=n.querySelector(".news-card__title").textContent,s=n.querySelector(".news-card__text").textContent,i=n.querySelector(".news-card__source").textContent,l=n.querySelector(".news-card__source").getAttribute("href"),u=n.querySelector(".news-card__keyword").textContent;e.target.closest(".news-card").classList.contains("saved")?this.mainApi.deleteNews(this.cardId).then((function(e){r.style.background='url("./images/saveHover.svg")',n.classList.remove("saved")})).catch((function(e){console.log(e)})):this.mainApi.saveNews(u,c,s,a,i,l,o).then((function(e){t.cardId=e._id,r.style.background="url(./images/saveActive.svg)",n.classList.add("saved")})).catch((function(e){console.log(e)}))}},{key:"goToNews",value:function(e){if(!e.target.classList.contains("news-card__save-icon")){var t=e.target.closest(".news-card").querySelector(".news-card__source").getAttribute("href");document.location.href=t}}},{key:"mouseoverHandlerNotLogin",value:function(e){e.target.closest(".news-card").querySelector(".news-card__tooltip").style.display="flex"}},{key:"mouseoutHandlerNotLogin",value:function(e){e.target.closest(".news-card").querySelector(".news-card__tooltip").style.display="none"}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n,o;return t=e,(n=[{key:"signin",value:function(e,t){return fetch("".concat(this.baseUrl,"/signin"),{method:"POST",headers:this.headers,body:JSON.stringify({password:e,email:t})}).then((function(e){return e.ok?e.json():Promise.reject(e)}))}},{key:"signup",value:function(e,t,n){return fetch("".concat(this.baseUrl,"/signup"),{method:"POST",headers:this.headers,body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return e.ok?e.json():Promise.reject(e)}))}},{key:"getUserData",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.ok?e.json():Promise.reject(e)}))}},{key:"getNews",value:function(){return fetch("".concat(this.baseUrl,"/articles/"),{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"saveNews",value:function(e,t,n,r,o,a,c){return fetch("".concat(this.baseUrl,"/articles"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({keyword:e,title:t,text:n,date:r,source:o,link:a,image:c})}).then((function(e){return e.ok?e.json():Promise.reject(e)}))}},{key:"deleteNews",value:function(e){return fetch("".concat(this.baseUrl,"/articles/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.ok?e.json():Promise.reject(e)}))}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={baseUrl:"https://www.api.news-aggreg.tk",headers:{Accept:"application/json","Content-Type":"application/json"}}},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);n(5);var r=n(0),o=n(2),a=n(1),c=n(3);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t,this.createCard=n,this.result=document.querySelector(".result"),this.savedInfoTitle=document.querySelector(".saved-info"),this.resultContainer=document.querySelector(".result__container")}var t,n,r;return t=e,(n=[{key:"renderContent",value:function(){this.getName(),this.getCurrentNews(),this.getArticles(),this.result.style.display="flex"}},{key:"getName",value:function(){var e=this;this.api.getUserData().then((function(t){console.log(e.savedInfoTitle),e.savedInfoTitle.querySelector(".Name").textContent=t.name})).catch((function(e){console.log(e)}))}},{key:"getCurrentNews",value:function(){var e=this;this.api.getNews().then((function(t){e.savedInfoTitle.querySelector(".NumberArticles").textContent=t.data.length;var n=[];t.data.forEach((function(e){n.push(e.keyword)}));var r=new Set(n),o=Array.from(r);console.log(o),o.length<=2?(console.log(o),document.querySelector(".saved-info__keywords-more").style.display="none",document.querySelector(".and").style.display="none",document.querySelector(".saved-info__keywords").textContent=o.join()):(document.querySelector(".saved-info__keywords-more").style.display="flex",document.querySelector(".and").style.display="flex",document.querySelector(".saved-info__keywords").textContent="".concat(o[0],",").concat(o[1]),document.querySelector(".saved-info__number").textContent=o.length-2),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"getArticles",value:function(){var e=this;this.api.getNews().then((function(t){for(var n=0;n<t.data.length;n++)e.resultContainer.appendChild(e.createCard.create(t.data[n].date,t.data[n].title,t.data[n].text,t.data[n].source,t.data[n].link,t.data[n].image,t.data[n].keyword,t.data[n]._id));document.querySelectorAll(".news-card__keyword").forEach((function(e){e.style.display="flex"})),document.querySelectorAll(".news-card__save-icon").forEach((function(e){e.style.display="none"})),document.querySelectorAll(".news-card__delete-icon").forEach((function(t){t.style.display="flex",t.addEventListener("click",(function(t){var n=t.target.closest(".news-card").querySelector(".id").textContent,r=t.target.closest(".news-card");e.api.deleteNews(n),r.remove();var o=e.savedInfoTitle.querySelector(".NumberArticles").textContent-1;e.savedInfoTitle.querySelector(".NumberArticles").textContent=o}))}))})).catch((function(e){return console.log(e)}))}}])&&s(t.prototype,n),r&&s(t,r),e}();!function(){var e=document.querySelector(".header"),t=new o.a(c.a);t.getNews();var n=new a.a(t),s=new r.a(t,e);s.checkLogin(),s.redirect(),s.logoutInSave(),new i(t,n).renderContent()}()}]);